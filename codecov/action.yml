name: 'codecov'
description: 'Upload a coverage report to Codecov'
inputs:
  coverage-report:
    required: true
    description: "Path to the coverage report"

runs:
  using: "composite"
  steps:
    - name: Harden Runner
      uses: step-security/harden-runner@18f6947f131da60743dc12d2a22ff28c2b4ea87f
      with:
        disable-sudo: true
        egress-policy: block
        allowed-endpoints: >
          api.codecov.io:443
          api.github.com:443
          cli.codecov.io:443
          github.com:443
          storage.googleapis.com:443

    - uses: codecov/codecov-action@25fe46e17d692bac1908f2f457f98d2c936d894d
      with:
        file: ${{ inputs.coverage-report }}
